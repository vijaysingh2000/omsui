<div class="modal-backdrop" (click)="close()"></div>
<div class="detail-modal" role="dialog" aria-modal="true" aria-labelledby="insuranceDetailTitle">
  <div class="detail-header">
    <h4 id="insuranceDetailTitle" class="mb-0">
      üõ°Ô∏è
      @if (isNew) { New Insurance }
      @else if (insurance) { {{ insurance.name || 'Insurance Details' }} <span class="id-badge">ID: {{ insuranceId }}</span> }
      @else { Insurance Details }
    </h4>
    <button class="btn-close-x" (click)="close()" aria-label="Close">‚úï</button>
  </div>

  <div class="detail-body">
    @if (loading) {
      <div class="text-center py-5 text-muted">
        <span class="spinner-border spinner-border-sm me-2"></span> Loading insurance‚Ä¶
      </div>
    } @else if (errorMsg && !insurance) {
      <div class="alert alert-danger">{{ errorMsg }}</div>
    } @else if (insurance) {

      @if (errorMsg) {
        <div class="alert alert-danger alert-dismissible" role="alert">
          {{ errorMsg }}<button type="button" class="btn-close" (click)="errorMsg = null"></button>
        </div>
      }
      @if (successMsg) { <div class="alert alert-success">{{ successMsg }}</div> }

      <form (ngSubmit)="save()" #detailForm="ngForm" novalidate>
        <div class="form-section">
          <div class="section-title">üõ°Ô∏è Insurance Information</div>
          <div class="row g-3">

            <div class="col-md-8">
              <label class="form-label">Insurance Name <span class="required">*</span></label>
              <input type="text" class="form-control form-control-sm" name="name"
                     [(ngModel)]="insurance.name" placeholder="Insurance name" required />
            </div>

            <div class="col-md-4">
              <label class="form-label">Status</label>
              <select class="form-select form-select-sm" name="active" [(ngModel)]="insurance.active">
                <option [ngValue]="true">Active</option>
                <option [ngValue]="false">Inactive</option>
              </select>
            </div>

            <div class="col-md-12">
              <label class="form-label">Description</label>
              <textarea class="form-control form-control-sm" name="description" rows="3"
                        [(ngModel)]="insurance.description" placeholder="Description"></textarea>
            </div>

          </div>
        </div>

        <div class="detail-footer">
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="close()">Cancel</button>
          <button type="submit" class="btn btn-sm btn-primary" [disabled]="saving">
            @if (saving) { <span class="spinner-border spinner-border-sm me-1"></span> Saving‚Ä¶ }
            @else { üíæ Save }
          </button>
        </div>
      </form>
    }
  </div>
</div>
